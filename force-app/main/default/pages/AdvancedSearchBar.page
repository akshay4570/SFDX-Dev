<apex:page doctype="html-5.0" controller="AdvancedCandidateSearch">
    <apex:form >
        <apex:panelGrid columns="2">
            <apex:pageblock title="Filters" id="blockA">
                <apex:pageBlockSection columns="1">
                    <h2>Search Key</h2>
                    <apex:inputText html-placeholder="Search by Name" required="true" value="{!field}"/>
                </apex:pageBlockSection>
                <apex:pageBlockSection columns="1">
                    <apex:outputLabel >Max Experience(0 to 20)</apex:outputLabel>
                    <input type="range" min="0" max="20" step="1" id="maxAge" oninput="handleMaxAge(this)" value="{!minAge}"/>
                    <output id="maxAgeOutput"></output>
                    <apex:outputLabel >Min Experience(0 to 20)</apex:outputLabel>
                    <input type="range" min="0" max="20" step="1" id="minAge" oninput="handleMinAge(this)" value="{!maxAge}"/>
                    <output id="minAgeOutput"></output>
                </apex:pageBlockSection>
                <h2>City</h2>
                <br/>
             
                <apex:repeat value="{!cities}" var="city" id="theRepeat">
                    <apex:inputCheckbox label="{!city}" onclick="oneCheckbox(this)" id="theValue"/>
                    <apex:outputText value="{!city}" id="theValue1"/><br/>
                </apex:repeat>
                <br/>
                <h2>Skills</h2><br/>
                <apex:repeat value="{!skills}" var="skill" id="theRepeat1">
                    <apex:inputCheckbox label="{!skill}" id="theValue3"/>
                    <apex:outputText value="{!skill}" id="theValue2"/><br/>
                </apex:repeat>
                <br/>
                <apex:commandButton value="Search" style="width:100px" action="{!searchCandidatesByName}"/> 
            </apex:pageblock>
            <apex:pageblock title="Candidate Records" id="blockB">
                <apex:pageBlockSection id="contact-table" columns="1">
                    <apex:pageBlockTable value="{!candidates}" var="c">
                        <apex:column >
                            <apex:facet name="header">Id</apex:facet>
                            {!c.Name}
                        </apex:column>
                        <apex:column >
                            <apex:facet name="header">First Name</apex:facet>
                            {!c.First_Name__c}
                        </apex:column>
                        <apex:column >
                            <apex:facet name="header">Last Name</apex:facet>
                            {!c.Last_Name__c}
                        </apex:column>
                        <apex:column >
                            <apex:facet name="header">City</apex:facet>
                            {!c.City__c}
                        </apex:column>     
                    </apex:pageBlockTable>
            </apex:pageBlockSection>
            </apex:pageblock>
        </apex:panelGrid>
    </apex:form>
    <script>
        function oneCheckbox(obj)
        {
            console.log(obj.id.split(':')[4]);
            if (obj.checked)
            {
                var inputs = document.getElementsByTagName("input");
        
                for (var i = 0; i < inputs.length; i++)
                {
                    var oInput = inputs[i];
                    if (oInput.type == "checkbox" && oInput.checked && oInput != obj)
                    {
                        oInput.checked = false; 
                    }  
                }
            }
            indexCities = obj.id.split(':')[4];
        }
        function handleMinAge(obj){
            minAge = obj.value;
            document.getElementById('minAgeOutput').innerHTML = obj.value;
        }
        function handleMaxAge(obj){
            maxAge = obj.value;
            document.getElementById('maxAgeOutput').innerHTML = obj.value;
        }
</script>
</apex:page>